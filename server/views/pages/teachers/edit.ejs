<%- include('../../partials/header'); %>
    <%- include('../../partials/sidebar'); %>
        <div class="content-wrapper">

            <div class="content-header">
                <div class="container-fluid">
                    <div class="row mb-2">
                        <div class="col-sm-6">
                            <h1 class="m-0">Students</h1>
                        </div>
                        <div class="col-sm-6">
                            <ol class="breadcrumb float-sm-right">
                                <li class="breadcrumb-item"><a href="#">Home</a></li>
                                <li class="breadcrumb-item active">Students</li>
                            </ol>
                        </div>
                    </div>
                </div>
            </div>
            <%- include('../../partials/error'); %>
                <section class="content-header">
                    <div class="container-fluid">
                        <div class="row mb-2">
                            <div class="col-sm-6">
                            </div>
                            <div class="col-sm-6">
                                <ol class="breadcrumb float-sm-right">
                                    <a href="/students-list" class="btn btn-primary">Back</a>
                                </ol>
                            </div>
                        </div>
                    </div>
                </section>
                <section class="content">
                    <div class="container-fluid">
                        <div class="row">

                            <div class="col-md-12">

                                <div class="card card-primary">
                                    <div class="card-header">
                                        <h3 class="card-title">Edit Student</h3>
                                    </div>

                                    <form id="batchform" action="/student-update" method="POST"
                                        enctype="multipart/form-data">
                                        <div class="card-body">
                                            <h4>Student Details</h4>
                                            <div class="row">
                                                <div class="form-group col">
                                                    <label for="name">First Name</label>
                                                    <input type="text" name="firstName" class="form-control"
                                                        id="firstName" value="<%= StudentData.firstName %>"
                                                        placeholder="Enter First Name">
                                                    <input type="hidden" name="id" value="<%= StudentData.id %>">
                                                </div>
                                                <div class="form-group col">
                                                    <label for="name">Last Name</label>
                                                    <input type="text" name="lastName" class="form-control"
                                                        id="lastName" value="<%= StudentData.lastName %>"
                                                        placeholder="Enter Last Name">
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="form-group col">
                                                    <label for="name">Email</label>
                                                    <input type="email" name="email" class="form-control" id="email"
                                                        value="<%= StudentData.email %>" placeholder="Enter Email">
                                                </div>
                                                <div class="form-group col">
                                                    <label for="name">Mobile</label>
                                                    <input type="text" name="mobile_no" class="form-control"
                                                        id="mobile_no" value="<%= StudentData.mobile_no %>"
                                                        placeholder="Enter Mobile">
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="form-group col">
                                                    <label for="name">Date of Birth</label>
                                                    <input type="date" name="dob" value="<%= StudentData.dob %>"
                                                        class="form-control" id="dob" placeholder="Enter DOB">
                                                </div>
                                                <div class="form-group col">
                                                    <label for="name">Gender</label>
                                                    <select class="form-control" name="gender" id="gender">
                                                        <option value="" selected disabled>Select Gender</option>
                                                        <option value="Male" <%=(StudentData.gender=="Male" )
                                                            ? 'selected' : '' %> >Male</option>
                                                        <option value="Female" <%=(StudentData.gender=="Female" )
                                                            ? 'selected' : '' %>>Female</option>
                                                        <option value="Other" <%=(StudentData.gender=="Other" )
                                                            ? 'selected' : '' %>>Other</option>

                                                    </select>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="form-group col">
                                                    <label for="name">Father's Name</label>
                                                    <input type="text" name="fathersName" class="form-control"
                                                        id="fathersName" value="<%= StudentData.fathersName %>"
                                                        placeholder="Enter Father's Name">
                                                </div>
                                                <div class="form-group col">
                                                    <label for="name">Mother's Name</label>
                                                    <input type="text" name="mothersName" class="form-control"
                                                        id="mothersName" value="<%= StudentData.mothersName%>"
                                                        placeholder="Enter Mother's Name">
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="form-group col">
                                                    <label for="name">Address</label>
                                                    <textarea name="address" id="address" class="form-control" cols="30"
                                                        rows="2"><%= StudentData.address %></textarea>
                                                </div>
                                                <div class="form-group col">
                                                    <label>Select Boards</label>
                                                    <select class="form-control" name="board_id" id="board_id">
                                                        <option value="" selected disabled>Select Board</option>
                                                        <%for(var i=0; i< boards.length; i++) { var
                                                            boardId=boards[i].id; %>
                                                            <option value="<%= boards[i].id %>"
                                                                <%=(StudentData.board_id==boardId) ? 'selected' : '' %>
                                                                >
                                                                <%= boards[i].name %>
                                                            </option>
                                                            <%}%>
                                                    </select>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="form-group col">
                                                    <label>Select Country</label>
                                                    <select class="form-control" name="country_id" id="country-select">
                                                        <option value="" selected disabled>Select Country</option>
                                                        <%for(var i=0; i< countries.length; i++) { var
                                                            cuntId=countries[i].id; %>
                                                            <option value="<%= countries[i].id %>"
                                                                <%=(StudentData.country_id==countries[i].id )
                                                                ? 'selected' : '' %>>
                                                                <%= countries[i].name %>
                                                            </option>
                                                            <%}%>
                                                    </select>
                                                </div>
                                                <div class="form-group col">
                                                    <label>Select State</label>
                                                    <select class="form-control " name="state_id" id="state-select">
                                                        <option value="" id="optop" selected disabled>Select State
                                                        </option>
                                                        <%for(var j=0; j< state.length; j++) { var stateId=state[j].id;
                                                            %>
                                                            <option <%=(StudentData.state_id==stateId ) ? 'selected'
                                                                : '' %> value="<%= state[j].id %>"><%= state[j].name %>
                                                            </option>
                                                            <%}%>
                                                    </select>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="form-group col">
                                                    <label>Select City</label>
                                                    <select class="form-control" name="city_id" id="city-select">
                                                        <option value="" id="optop" selected disabled>Select City
                                                        </option>
                                                        <%for(var j=0; j< city.length; j++) { var cityId=city[j].id; %>
                                                            <option <%=(StudentData.city_id==cityId ) ? 'selected' : ''
                                                                %> value="<%= city[j].id %>"><%= city[j].name %>
                                                            </option>
                                                            <%}%>
                                                    </select>
                                                </div>
                                                <div class="form-group col">
                                                    <% if(StudentData.profile_img) {%>
                                                        <label for="uploadvideo">Uploaded Image</label>
                                                        <div class="input-group">
                                                            <img src="<%= StudentData.profile_img %>" alt="<%= StudentData.profile_img %>" class=""
                                                                style="width: 200px;">
                                                        </div>
                                                        <%}%>
                                                    <label for="name">Profile Pic</label>
                                                    <input type="file" name="profile_img" id="profile_img"
                                                        class="form-control">
                                                    <input type="hidden" name="oldprofile_img"
                                                        value="<%= StudentData.profile_img %>">
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="form-group col">
                                                    <label for="name">School/University Name</label>
                                                    <input type="text" name="school_or_university_name"
                                                        class="form-control"
                                                        value="<%= StudentData.school_or_university_name %>"
                                                        id="school_or_university_name"
                                                        placeholder="Enter School/University Name">
                                                </div>
                                                <!-- <div class="form-group col">
                                                    <label for="name">Branch Name</label>
                                                    <input type="text" name="branch_studying_in" class="form-control"
                                                        id="branch_studying_in" placeholder="Enter Branch Name">
                                                </div> -->
                                            </div>
                                            <div class="row">
                                                <div class="form-group col">
                                                    <% if(StudentData.upload_file) {%>
                                                        <label for="uploadvideo">Uploaded Image</label>
                                                        <div class="input-group">
                                                            <img src="<%= StudentData.upload_file %>" alt="<%= StudentData.upload_file %>" class=""
                                                                style="width: 200px;">
                                                        </div>
                                                        <%}%>
                                                            <label for="name">Document Upload</label>
                                                            <input type="file" name="upload_file" id="upload_file"
                                                                class="form-control">
                                                            <input type="hidden" name="oldupload_file"
                                                                value="<%= StudentData.upload_file %>">
                                                </div>
                                                <div class="form-group col">
                                                    <label>Select Document Type</label>
                                                    <select class="form-control" name="upload_file_type"
                                                        id="upload_file_type">
                                                        <option value="" selected disabled>Select Document Type</option>
                                                        <option value="Adhaar"
                                                            <%=(StudentData.upload_file_type=="Adhaar" ) ? 'selected'
                                                            : '' %>>Adhaar</option>
                                                        <option value="Student Id"
                                                            <%=(StudentData.upload_file_type=="Student Id" )
                                                            ? 'selected' : '' %>>Student Id</option>
                                                        <option value="Parent Id"
                                                            <%=(StudentData.upload_file_type=="Parent Id" ) ? 'selected'
                                                            : '' %>>Parent Id</option>
                                                    </select>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="card-body">
                                            <h4>Academic Details</h4>
                                            <div class="row">
                                                <div class="form-group col">
                                                    <label for="name">Grade Studying In</label>
                                                    <input type="text" name="grade_studying_in" class="form-control"
                                                        id="grade_studying_in"
                                                        value="<%= StudentData.grade_studying_in %>"
                                                        placeholder="Enter Grade Studying In">
                                                </div>
                                                <div class="form-group col">
                                                    <label for="name">Branch Studying In</label>
                                                    <input type="text" name="branch_studying_in" class="form-control"
                                                        value="<%= StudentData.branch_studying_in %>"
                                                        id="branch_studying_in" placeholder="Enter Branch Studying In">
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="form-group col">
                                                    <label for="name">Last Aggregate Marks Scored</label>
                                                    <input type="text" name="last_aggregate_marks" class="form-control"
                                                        value="<%= StudentData.last_aggregate_marks %>"
                                                        id="last_aggregate_marks"
                                                        placeholder="Enter Last Aggregate Marks Scored">
                                                </div>
                                                <div class="form-group col">
                                                    <label for="name">Subjects Studying</label>
                                                    <input type="text" name="subject_stuying" class="form-control"
                                                        value="<%= StudentData.subject_stuying %>" id="subject_stuying"
                                                        placeholder="Enter Subjects Studying">
                                                </div>
                                            </div>
                                            <div class="row">

                                                <div class="form-group col">
                                                    <label for="name">Weak Subjects</label>
                                                    <input type="text" name="weak_subject" class="form-control"
                                                        id="weak_subject" value="<%= StudentData.weak_subject %>"
                                                        placeholder="Enter Weak Subjects">
                                                </div>
                                                <div class="form-group col">
                                                    <label for="name">Strong Subjects</label>
                                                    <input type="text" name="strong_subject" class="form-control"
                                                        id="strong_subject" value="<%= StudentData.strong_subject %>"
                                                        placeholder="Enter Strong Subjects">
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="form-group col">
                                                    <label for="name">Hobbies</label>
                                                    <input type="text" name="hobbies" value="<%= StudentData.hobbies %>"
                                                        class="form-control" id="hobbies" placeholder="Enter Hobbies">
                                                </div>
                                                <div class="form-group col">
                                                    <label for="name">Interests</label>
                                                    <input type="text" name="interest" class="form-control"
                                                        id="interest" value="<%= StudentData.interest %>"
                                                        placeholder="Enter Interests">
                                                </div>
                                            </div>
                                        </div>

                                        <div class="card-footer">
                                            <button type="submit" class="btn btn-primary">Submit</button>
                                        </div>
                                    </form>
                                </div>

                            </div>


                            <div class="col-md-6">
                            </div>

                        </div>

                    </div>
                </section>

        </div>
        <%- include('../../partials/footer'); %>
            <script>
                $('#country-select').on('change', function () {

                    var newval = $(this).val();
                    if (newval) {


                        $.ajax({
                            type: "Get",
                            url: "api/getallstatebycountry?countryId=" + newval,
                            success: function (result) {

                                var subcat = JSON.stringify(result);
                                var sub_data = JSON.parse(subcat);
                                var subObj = sub_data.data;
                                var output = ['<option value="" >Select State</option>'];
                                $.each(subObj, function (k, v) {
                                    var option = '<option value="' + v.id + '">' + v.name + '</option>';
                                    output.push(option)
                                });

                                $('#state-select').html(output.join(''));
                            },
                            error: function (exception) { console.log('Exeption:' + exception); }
                        });
                    } else {
                        var output = ['<option value="" >Select State</option>'];

                        $('#state-select').html(output.join(''));

                    }
                });



                $('#state-select').on('change', function () {

                    var newval = $(this).val();
                    if (newval) {


                        $.ajax({
                            type: "Get",
                            url: "api/getallcitybystate?stateId=" + newval,
                            success: function (result) {

                                var subcat = JSON.stringify(result);
                                var sub_data = JSON.parse(subcat);
                                var subObj = sub_data.data;
                                var output = ['<option value="" >Select City</option>'];
                                $.each(subObj, function (k, v) {
                                    var option = '<option value="' + v.id + '">' + v.name + '</option>';
                                    output.push(option)
                                });

                                $('#city-select').html(output.join(''));
                            },
                            error: function (exception) { console.log('Exeption:' + exception); }
                        });
                    } else {
                        var output = ['<option value="" >Select City</option>'];

                        $('#city-select').html(output.join(''));

                    }
                });
            </script>